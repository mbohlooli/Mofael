<input
  *ngIf="filteredData.length != 0"
  type="text"
  class="form-control"
  style="margin-bottom: 15px;"
  placeholder="جستجو..."
  ngModel
  #query="ngModel"
  (input)="search(query.value)"
/>
<ng-container *ngIf="filteredData.length != 0; else noData">
  <table class="table table-bordered table-striped table-hover">
    <thead>
      <tr>
        <th></th>
        <th
          *ngFor="let column of columns"
          (click)="sort(column.path)"
          style="cursor: pointer;"
        >
          {{ column.label }}
          <i
            [style.color]="
              sortColumn.path == column.path ? 'black' : 'transparent'
            "
            class="fa {{
              sortColumn.order == 'asc' ? 'fa-sort-down' : 'fa-sort-up'
            }}"
          ></i>
        </th>
        <th *ngIf="actions.update || actions.delete"></th>
      </tr>
    </thead>
    <tbody>
      <tr
        class="data-row"
        *ngFor="let item of pagedData; let i = index"
        [routerLink]="[url, item._id]"
      >
        <td style="width: 2%">{{ (page - 1) * limit + i + 1 }}</td>
        <td *ngFor="let column of columns">
          <ng-container
            *ngIf="getType(pick(item, column.path)) != 'object'; else obj"
            >{{ pick(item, column.path) }}
          </ng-container>
          <ng-template #obj>
            <span
              *ngFor="let subItem of pick(item, column.path); let j = index"
              [class]="column.classes[subItem[column.subPath]]"
            >
              {{ pick(subItem, column.subPath) }}
            </span>
          </ng-template>
        </td>
        <td *ngIf="actions.update || actions.delete">
          <!--TODO: 2-add a button for delte all with a dialog-->
          <!--TODO: 3-add a checkbox if not checked show dialog for deleting -->
          <!-- REVIEW: bootstrap toast shall be useful -->
          <button
            *ngIf="actions.update"
            class="btn btn-primary btn-circle"
            style="margin-left: 10px;"
          >
            <i class="fas fa-pen"></i>
          </button>
          <button *ngIf="actions.delete" class="btn btn-danger btn-circle">
            <i class="fas fa-trash"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="row">
    <div class="col-2">
      <div class="input-group input-group-sm mb-3" style="width: 150px;">
        <div class="input-group-prepend">
          <span class="input-group-text" id="inputGroup-sizing-sm">تعداد</span>
        </div>
        <input
          type="number"
          class="form-control"
          [(ngModel)]="limit"
          (input)="syncPages()"
          [min]="1"
          [max]="filteredData.length"
        />
      </div>
    </div>
    <div class="col-7">
      <div class="center">
        نمایش {{ limit }} مورد از {{ filteredData.length }}
      </div>
    </div>
    <div class="col">
      <div class="float-left">
        <nav>
          <ul class="pagination">
            <li
              class="page-item"
              (click)="
                !(page * limit >= filteredData.length) ? shiftPage(1) : 0
              "
              [class.disabled]="page * limit >= filteredData.length"
            >
              <a class="page-link" aria-label="Previous" href="#">
                <i aria-hidden="true" class="fas fa-arrow-right"></i>
              </a>
            </li>
            <li
              class="page-item"
              *ngFor="let pageNumber of getPageNumbersArray()"
              (click)="syncPages(pagesCount - pageNumber + 1)"
              [class.active]="page == pagesCount - pageNumber + 1"
            >
              <a class="page-link" href="#">{{
                pagesCount - pageNumber + 1
              }}</a>
            </li>
            <li
              class="page-item"
              (click)="(page - 1) * limit != 0 ? shiftPage(-1) : 0"
              [class.disabled]="(page - 1) * limit == 0"
            >
              <a class="page-link" aria-label="Next" href="#">
                <i aria-hidden="true" class="fas fa-arrow-left"></i>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</ng-container>
<ng-template #noData>
  <div class="card bg-info text-white shadow rtl" style="padding: 15px;">
    داده ای برای نمایش یافت نشد.
  </div>
</ng-template>
